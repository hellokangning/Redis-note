整数集合（intset）是集合键的底层实现之一，当一个集合只包含整数值元素，并且数量不多时，Redis采用整数集合作为集合键的底层实现。

# 6.1 整数集合的实现

整数集合，可以保存int16\_t、int32\_t或者int64\_t的整数值，且元素不重复，intset.h/intset结构表示一个整数集合：

```c
typedef struct intset {
  uint32_t encoding; // 决定contents保存的真正类型
  uint32_t length;
  int8_t contents[]; // 各项从小到大排序
} inset;
```

![five-int16](img/chap6/five-int16.png)

上图中，contents数组的大小为sizeof(int16\_t) * 5 = 80位。

# 6.2 升级

